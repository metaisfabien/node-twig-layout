<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"global.html":{"id":"global.html","title":"Global","body":" Documentation Classes BlockContainerLayout Global Global Global Type Definitions BlockConfig Type: Object Properties: Name Type Description blocks Array Children blocks to add Cache Cache object use standard functions you'd expect in most caches Type: Object Properties: Name Type Description set function Set something in cache get function Get something from cache detl function Delete from cache × Search results Close Documentation generated by JSDoc 3.5.5 on 2019-01-13T15:31:57+01:00 using the DocStrap template. "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" Documentation Classes BlockContainerLayout Global Global Classes Classes Block Container Layout × Search results Close Documentation generated by JSDoc 3.5.5 on 2019-01-13T15:31:57+01:00 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" Documentation Classes BlockContainerLayout Global Global twig-layout! In Dev dont use this ! twig-layout is a layout system based on twig. Instalation$ npm install twig-layoutExemple:This exemple use express and express-twig-layout install express and express-twig-layout $ npm install --save express $ npm install --save express-twig-layoutindex.jsCreate a simple express app with two route: /home and /test var express = require('express') var layout = require('express-twig-layout') var app = express() //set the views directory app.set('view', './views') app.use(layout({ extendFilter: {}, extendFunction:{} })) //home route app.get('/home', async (req, res) =&gt; { //load the layout from the file home.html await req.layout.loadTemplate('home.html') //send the layout html const html = await req.layout.render() res.send(html) }) //test route app.get('/test', function (req, res) { //load the layout from the file test.html await req.layout.loadTemplate('test.html') //Set the title of the block head req.layout.getBlock('head').data.title = 'Test page' //send the layout html const html = await req.layout.render() res.send(html) }) app.get('*', function (req, res) { res.redirect('/home') }) app.listen(3000, function () { console.log('Example app listening on port 3000!') })/views/page/default.htmlThe template for the page For the template syntax read the twig js documentation &lt;template&gt; &lt;!doctype html&gt; &lt;html lang=\"en\"&gt; &lt;!-- block head --&gt; {{ getBlockHtml('head') }} &lt;body&gt; &lt;header&gt; &lt;nav&gt; &lt;ul&gt; &lt;li&gt; &lt;a href=\"/home\"&gt;Home&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href=\"/test\"&gt;Test&lt;/a&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/nav&gt; &lt;/header&gt; &lt;main role=\"main\"&gt; &lt;!-- block content --&gt; {{ getBlockHtml('content') }} &lt;/main&gt; &lt;footer&gt; &lt;p&gt;footer&lt;/p&gt; &lt;/footer&gt; &lt;/body&gt; &lt;/html&gt; &lt;/template&gt; &lt;script&gt; //Require the block dependency var Block = require('node-twig-layout/block') //Block for the page class Default extends Block { init () { //set the name of the block //the name of the block can be define in this way or for other block it can be defined in the config this.name = 'page' //Head block this.addBlock({name: 'head', template: 'page/head.html'}) //content block it just a block container //to use block with no html temple use type this.addBlock({name: 'content', script: 'twig-layout/scripts/container'}) } /** * before render callback */ beforeRender () { //Add a css file this.layout.getBlock('head').addCss('https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css', -10) } } module.exports = Default &lt;/script&gt;/views/page/head.htmltemplate for the head block define in the file views/page/default.html &lt;template&gt; &lt;head&gt; &lt;meta charset=\"utf-8\"&gt; &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1, shrink-to-fit=no\"&gt; &lt;meta name=\"description\" content=\"\"&gt; &lt;meta name=\"author\" content=\"\"&gt; &lt;title&gt;{{title}}&lt;/title&gt; {% for file in css %} &lt;link rel=\"stylesheet\" href=\"{{file}}\"&gt; {% endfor %} {% for file in js %} &lt;script src=\"{{file}}\"&gt;&lt;/script&gt; {% endfor %} &lt;/head&gt; &lt;/template&gt; &lt;script&gt; //requite the block object var Block = require('node-twig-layout/block') //A Test class for the test page class Head extends Block { /** * Init method */ init() { //unsorted array this._css = [] this._js = [] //data array for render this.data.css = [] this.data.js = [] } //add css files addCss (cssFiles, weight = 0) { if (Array.isArray(cssFiles)) { for (var key in cssFiles) { this._css.push({weight: weight, file: cssFiles[key]}) } } else if (typeof cssFiles === 'string') { this._css.push({weight: weight, file: cssFiles}) } else { throw Error('Invalid addCss argument') } } //add js files to the data object addJs (jsFiles) { if (Array.isArray(jsFiles)) { for (var key in jsFiles) { this._js.push({weight: weight, file: jsFiles[key]}) } } else if (typeof jsFiles === 'string') { this._js.push({weight: weight, file: jsFiles}) } else { throw Error('Invalid addJs argument') } } /** * Before render callback */ beforeRender() { var sort = function(a, b) { return a.weight - b.weight } this._css.sort(sort); for (const key in this._css) this.data.css.push(this._css[key].file) this._js.sort(sort); for (const key in this._js) this.data.js.push(this._js[key].file) } } module.exports = Head &lt;/script&gt;/views/home.htmlThe template for the /home route &lt;template&gt; &lt;div&gt; &lt;h1&gt;Home page&lt;/h1&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; //requite the block object var Block = require('node-twig-layout/block') //A Block class for the home page class Home extends Block { init () { this.page ='page/default.html' //name of the parent block of this block //here the block content, it is defined in the file page/default.html this.parent = 'content' } beforeRender() { this.layout.getBlock('head').data.title = 'Home page' } } module.exports = Home &lt;/script&gt;/views/test.htmlThe template for the /test route &lt;template&gt; &lt;div class=\"test\"&gt; &lt;h1&gt;Test&lt;/h1&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; //requite the block object var Block = require('node-twig-layout/block') //A Test class for the test page class Test extends Block { init () { this.page ='page/default.html' //name of the parent block of this block //here the block content, it is defined in the file page/default.html this.parent= 'content' } } module.exports = Test &lt;/script&gt;Run:$ node index.js × Search results Close Documentation generated by JSDoc 3.5.5 on 2019-01-13T15:31:57+01:00 using the DocStrap template. "},"Block.html":{"id":"Block.html","title":"Class: Block","body":" Documentation Classes BlockContainerLayout Global Global Class: Block Block Block Object use to store html and template data and render them new Block(layout, options) Constructor Parameters: Name Type Description layout Layout Layout instance options Object Block options Properties Name Type Description name string Block name html string Block html config BlockConfig Block config parent string Block parnet name template string Block tamplate path cache Cache Cache instance Members config :Object Config object Type: Object data :string Block data object, it's the object passed to twig for render Type: string html :string Block html Type: string layout :Layout Layout instance Type: Layout name :string Block name Type: string page :string|null Block page path Type: string | null parent :string block parent name take from config or options Type: string template :string template path Type: string Methods addBlocks(blocks) Add many blocks Parameters: Name Type Description blocks Array blocks configs array &lt;async&gt; afterLoad() AfterLoad call back called after all blocks are loaded &lt;async&gt; beforeRender() Before render callback Call before the render getBlock(name) Get a block instance by name Parameters: Name Type Description name string Block name Returns: Block instance Type Block getChildrenBlock() return the children block to load after this block init &lt;async&gt; init() Init callback call at the end of construct &lt;async&gt; isCached() Check if the block render is cached Returns: Type Boolean &lt;async&gt; render() Render the block Render the children blocks and the block Returns: Block html rendered Type string × Search results Close Documentation generated by JSDoc 3.5.5 on 2019-01-13T15:31:57+01:00 using the DocStrap template. "},"Container.html":{"id":"Container.html","title":"Class: Container","body":" Documentation Classes BlockContainerLayout Global Global Class: Container Container Container block Object Use to store blocks and render them new Container() Methods &lt;async&gt; render() Render the children blocks Returns: Type string × Search results Close Documentation generated by JSDoc 3.5.5 on 2019-01-13T15:31:57+01:00 using the DocStrap template. "},"Layout.html":{"id":"Layout.html","title":"Class: Layout","body":" Documentation Classes BlockContainerLayout Global Global Class: Layout Layout Layout Class Manage blocks new Layout(options) Parameters: Name Type Description options Object Layout options Properties Name Type Description cache Cache Cache instance cacheDir string Path to the cache dir views string Path to the views dir Members blocks :Object Store blocks instance by name Type: Object renderPage :boolen Define if render a page or juste template block Type: boolen Methods &lt;async&gt; _afterInitBlock(block) Call afterInit callback and load child block Parameters: Name Type Description block * &lt;async&gt; _cacheTemplate(template, content) Put the html and the script in a cache file Parameters: Name Type Description template * content * &lt;async&gt; _loadFileTemplate(template) Open a template file search for template and script tags return and object with html and scipt Parameters: Name Type Description template String tamplate path Returns: Type Object &lt;async&gt; createBlock(options) Create a Block instance Parameters: Name Type Description options Object block params Returns: Block extendTwigFilter(name, filter) Extend twig filter Parameters: Name Type Description name String filter name filter function filter function &lt;async&gt; extendTwigFilters(extendFilters) Extend twig filters Parameters: Name Type Description extendFilters Object filters object {name: filter function, ...} extendTwigFunction(name, fn) Extend twig function Parameters: Name Type Description name String function name fn function function &lt;async&gt; extendTwigFunctions(extendFilters) Extend twig functions Parameters: Name Type Description extendFilters Object filters object {name: filter function, ...} getBlock(name) Return a Block instance by name Parameters: Name Type Description name Sting block name Returns: Block &lt;async&gt; getBlockHtml(name) Return the block html Parameters: Name Type Description name Sting block name Returns: Type String &lt;async&gt; init() Extend twig and init cache &lt;async&gt; loadTemplate(template, config) Load a template file Parameters: Name Type Description template string Template path relative to the views dir config Object Block config Properties Name Type Description script Object Block script path &lt;async&gt; render() Render the block page Returns: Type string &lt;async&gt; renderBlocks(parent) Render child blocks of the parent and return and object contain blocks html Parameters: Name Type Description parent string block parent name Returns: Object &lt;async&gt; renderFile(file, data) Render a template file Parameters: Name Type Description file string template path data Object data object of the template Returns: String &lt;async&gt; renderHtml(html, data) Render a html template with twig Parameters: Name Type Description html string html to render data Object data object of the template Returns: String × Search results Close Documentation generated by JSDoc 3.5.5 on 2019-01-13T15:31:57+01:00 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
